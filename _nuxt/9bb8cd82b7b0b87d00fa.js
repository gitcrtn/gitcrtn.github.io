(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{130:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-scene",{staticStyle:{position:"absolute",height:"100%",width:"100%"},attrs:{renderer:"antialias: true;"}},[n("a-assets",[n("a-asset-item",{attrs:{id:"tomatron82-obj",src:"/assets/shooting/tomatron82/model.obj"}}),t._v(" "),n("a-asset-item",{attrs:{id:"tomatron82-mtl",src:"/assets/shooting/tomatron82/materials.mtl"}})],1),t._v(" "),n("stage"),t._v(" "),n("targets",{ref:"targets",attrs:{position:"0 2 -10"},on:{smash:t.onSmashTarget}}),t._v(" "),n("shooting-menu",{ref:"menu",attrs:{title:t.title,position:"0 0 -3",mode:t.menuMode,score:t.score,maxTime:30},on:{"click-start":t.onClickStart,"start-ingame":t.onStartIngame,"finish-ingame":t.onFinishIngame,"click-reset":t.onClickReset}}),t._v(" "),n("controller",{on:{trigger:function(e){t.onTriggerController()}}}),t._v(" "),n("a-camera",{attrs:{position:"0 10 0"}})],1)};a._withStripped=!0;n(51);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-entity",{attrs:{"oculus-go-controls":"model: false",raycaster:"objects: .collidable"},on:{triggerchanged:t.onChangeTrigger,trackpadchanged:t.onChangeTrackpad,triggerdown:t.onDownTrigger,triggerup:t.onUpTrigger,trackpaddown:t.onDownTrackpad,trackpadup:t.onUpTrackpad,trackpadtouchstart:t.onTouchStartTrackpad,trackpadtouchend:t.onTouchEndTrackpad,trackpadmoved:t.onMovedTrackpad,"raycaster-intersection":t.onGetRaycasterIntersection}},[n("a-entity",{attrs:{"obj-model":"obj: #tomatron82-obj; mtl: #tomatron82-mtl",rotation:"0 0 0"}}),t._v(" "),n("a-cone",{attrs:{material:"side: single; color: white; transparent: true; opacity: 0.5","radius-bottom":"0.01","radius-top":"0.001",height:"6",position:"0.005 -0.007 -3",rotation:"-90 0 0"}}),t._v(" "),t.debug?n("a-entity",{attrs:{geometry:"primitive: plane; height: 1; width: 1",material:"shader: flat;",position:"0 2 -5"}},[n("a-text",{attrs:{id:"home",value:t.text,align:"center",color:"black",position:"0 0 0"}}),t._v(" "),n("a-text",{attrs:{id:"home2",value:t.text2,align:"center",color:"black",position:"0 -0.25 0"}})],1):t._e()],1)};o._withStripped=!0;var i=n(48),r=n.n(i),s={name:"GameShootingController",data:function(){return{text:"default",text2:"default",debug:!1}},methods:{onChangeTrigger:function(t){},onChangeTrackpad:function(t){},onDownTrigger:function(){this.text="trigger: down",this.$emit("trigger")},onUpTrigger:function(){this.text="trigger: up"},onDownTrackpad:function(){this.text="trackpad: down"},onUpTrackpad:function(){this.text="trackpad: up"},onTouchStartTrackpad:function(){this.text="trackpad: touch start"},onTouchEndTrackpad:function(){this.text="trackpad: touch end"},onMovedTrackpad:function(t){var e=t.detail;this.text2="trackpad: moved ("+r.a.keys(e)+" "+r.a.values(e)+")"},onIntersectRaycaster:function(){this.text="intersected!"},onGetRaycasterIntersection:function(t){}}},c=n(17),l=Object(c.a)(s,o,[],!1,null,null,null).exports,h=function(){var t=this.$createElement,e=this._self._c||t;return e("a-entity",[e("a-sky",{attrs:{color:"#A0D0FF"}}),this._v(" "),e("a-plane",{attrs:{width:"100",height:"100",color:"green",position:"0 0 0",rotation:"-90 0 0"}})],1)};h._withStripped=!0;var u={name:"GameShootingStage",methods:{}},d=Object(c.a)(u,h,[],!1,null,null,null).exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-entity",t._l(t.targets,function(e){return n("a-cylinder",{key:e.id,staticClass:"collidable",attrs:{color:t.getColor(e),radius:"0.5",height:"0.1",rotation:"90 0 0",position:t.getPosition(e)},on:{"raycaster-intersected":function(n){t.onIntersectRaycaster(e.id,!0)},"raycaster-intersected-cleared":function(n){t.onIntersectRaycaster(e.id,!1)}}})}))};m._withStripped=!0;var g=n(0),p={name:"GameShootingTargets",props:{maxTime:{type:Number,default:0}},data:function(){return{targets:{},idCount:0,hitId:-1,lifeTime:5e3,spawnInterval:2e3,timeId:null}},methods:{spawn:function(){g.a.set(this.targets,this.idCount,{id:this.idCount,x:r.a.random(-2,2),y:r.a.random(0,4),hit:!1});var t=this.targets,e=this.idCount,n=g.a.delete;r.a.delay(function(){n(t,e)},this.lifeTime),this.idCount++},getPosition:function(t){return t.x+" "+t.y+" 0"},getColor:function(t){return t.hit?"red":"white"},onIntersectRaycaster:function(t,e){g.a.set(this.targets[t],"hit",e),this.hitId=e?t:-1},click:function(){this.hitId<0||(g.a.delete(this.targets,this.hitId),this.hitId=-1,this.$emit("smash"))},start:function(){this.spawn();var t=this.spawn;this.timeId=setInterval(t,this.spawnInterval)},finish:function(){var t=this;clearInterval(this.timeId),r.a.keys(this.targets).forEach(function(e){g.a.delete(t.targets,e)})}}},f=Object(c.a)(p,m,[],!1,null,null,null).exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-entity",[t.showTitle?n("a-entity",[t.showCredit?t._e():n("a-entity",[n("a-plane",{attrs:{color:"white",position:"0 2 0",width:"2",height:"0.5"}},[n("a-text",{attrs:{value:t.title,align:"center",color:"black"}})],1),t._v(" "),n("menu-button",{attrs:{position:"0 1 0",text:"Start"},model:{value:t.startIntersect,callback:function(e){t.startIntersect=e},expression:"startIntersect"}}),t._v(" "),n("menu-button",{attrs:{position:"1.8 0.9 0.7",rotation:"0 -40 0",scale:"0.5 0.5 1",text:"Credit"},model:{value:t.creditIntersect,callback:function(e){t.creditIntersect=e},expression:"creditIntersect"}})],1),t._v(" "),t.showCredit?n("a-plane",{attrs:{position:"0 1.5 1",width:"2",height:"2"}},[n("a-text",{attrs:{value:"Staff",align:"center",color:"black",position:"0 0.8 0"}}),t._v(" "),n("a-text",{attrs:{value:"Programming: @Carotene",align:"left",color:"black",position:"-0.6 0.3 0",scale:"0.4 0.4 1"}}),t._v(" "),n("a-text",{attrs:{value:"Modeling: Sebastien Labrunie (CC-BY)",align:"left",color:"black",position:"-0.6 0 0",scale:"0.4 0.4 1"}}),t._v(" "),n("a-text",{attrs:{value:"TOMATRON 82: https://poly.google.com/view/3wuytTnJjQ7",align:"left",color:"black",position:"-0.6 -0.2 0",scale:"0.3 0.3 1"}}),t._v(" "),n("menu-button",{attrs:{position:"0 -0.7 0.1",scale:"0.5 0.5 1",text:"close"},model:{value:t.closeCreditIntersect,callback:function(e){t.closeCreditIntersect=e},expression:"closeCreditIntersect"}})],1):t._e()],1):t._e(),t._v(" "),t.showIngame?n("a-entity",{attrs:{position:"0 1 0"}},[t.showIngameCountDown?n("a-entity",{attrs:{position:"0 0.8 0",scale:"2 2 0"}},[n("a-text",{attrs:{value:t.countDown,color:"black",align:"center",position:"0 0 0"}})],1):t._e(),t._v(" "),t.showIngameIndicator?n("a-entity",{attrs:{position:"0 -0.4 0"}},[n("a-text",{attrs:{value:t.scoreText,align:"center",color:"black",position:"-1 0 0"}}),t._v(" "),n("a-text",{attrs:{value:t.timeText,align:"center",color:"black",position:"1 0 0"}})],1):t._e()],1):t._e(),t._v(" "),t.showResult?n("a-entity",[n("a-plane",{attrs:{color:"white",position:"0 2 0",width:"2",height:"0.5"}},[n("a-text",{attrs:{value:t.scoreText,align:"center",color:"black"}})],1),t._v(" "),n("menu-button",{attrs:{position:"0 1 0",text:"Back to Title"},model:{value:t.backIntersect,callback:function(e){t.backIntersect=e},expression:"backIntersect"}})],1):t._e()],1)};w._withStripped=!0;var v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-plane",{staticClass:"collidable",attrs:{color:t.color,width:"1.5",height:"0.5"},on:{"raycaster-intersected":function(e){t.onIntersectRaycaster(!0)},"raycaster-intersected-cleared":function(e){t.onIntersectRaycaster(!1)}}},[n("a-text",{attrs:{value:t.text,align:"center",color:"black"}})],1)};v._withStripped=!0;var I={name:"GameShootingButton",props:{value:{type:Boolean,default:!1},text:{type:String,default:""}},data:function(){return{hit:!1}},computed:{color:function(){return this.hit?"cyan":"white"}},methods:{onIntersectRaycaster:function(t){this.hit=t,this.$emit("input",t)}}},k={name:"GameShootingMenu",components:{MenuButton:Object(c.a)(I,v,[],!1,null,null,null).exports},props:{title:{type:String,default:""},mode:{type:String,default:"title"},score:{type:Number,default:0},maxTime:{type:Number,default:0}},data:function(){return{showTitle:!0,showIngame:!1,showResult:!1,showCredit:!1,showIngameCountDown:!1,showIngameIndicator:!1,countDown:0,timeCount:0,startIntersect:!1,backIntersect:!1,creditIntersect:!1,closeCreditIntersect:!1}},watch:{mode:function(t){switch(t){case"title":this.showResult=!1,this.showIngame=!1,this.showTitle=!0;break;case"ingame":this.showTitle=!1,this.showResult=!1,this.countDown=3,this.timeCount=this.maxTime,this.showIngameCountDown=!0,this.showIngame=!0,this.startCountDown();break;case"result":this.showIngameCountDown=!1,this.showIngameIndicator=!1,this.showTitle=!1,this.showIngame=!1,this.showResult=!0;break;case"hide":this.showTitle=!1,this.showIngame=!1,this.showResult=!1}}},computed:{scoreText:function(){return"Score: "+this.score},timeText:function(){return"Time: "+this.timeCount}},methods:{click:function(){this.startIntersect?(this.$emit("click-start"),this.startIntersect=!1):this.backIntersect?(this.$emit("click-reset"),this.backIntersect=!1):this.creditIntersect?(this.showCredit=!0,this.creditIntersect=!1):this.closeCreditIntersect&&(this.showCredit=!1,this.creditIntersect=!1)},startCountDown:function(){var t=this,e=setInterval(function(){t.countDown--},1e3);r.a.delay(function(){clearInterval(e),t.countDown="Start!",t.showIngameIndicator=!0},3e3),r.a.delay(function(){t.showIngameCountDown=!1,t.$emit("start-ingame"),t.startTimeCount()},4e3)},startTimeCount:function(){var t=this,e=setInterval(function(){t.timeCount--},1e3);r.a.delay(function(){clearInterval(e),t.countDown="Time Over!",t.showIngameCountDown=!0,r.a.delay(function(){t.$emit("finish-ingame")},2e3)},1e3*this.maxTime)}}},b={name:"GameShooting",components:{Controller:l,Stage:d,Targets:f,ShootingMenu:Object(c.a)(k,w,[],!1,null,null,null).exports},data:function(){return{title:"Simple Shooting",menuMode:"title",scoreCount:0,scoreWeight:10}},computed:{score:function(){return this.scoreCount*this.scoreWeight}},methods:{onTriggerController:function(){this.$refs.targets.click(),this.$refs.menu.click()},onClickStart:function(){this.scoreCount=0,this.menuMode="ingame"},onClickReset:function(){this.menuMode="title"},onStartIngame:function(){this.$refs.targets.start()},onFinishIngame:function(){this.$refs.targets.finish(),this.menuMode="result"},onSmashTarget:function(){this.scoreCount++}}},T=Object(c.a)(b,a,[],!1,null,null,null);e.default=T.exports}}]);